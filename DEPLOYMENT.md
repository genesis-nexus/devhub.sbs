# DevHub.sbs - Ubuntu Server Deployment Guide

## Architecture Overview

This deployment uses a modern, production-ready stack:
- **Web Server**: Nginx (high-performance, battle-tested)
- **Deployment Method**: Git-based continuous deployment
- **SSL/TLS**: Let's Encrypt (free, automated certificates)
- **Process Management**: Systemd
- **Monitoring**: Optional (instructions included)

## Prerequisites

- Ubuntu Server 20.04 LTS or newer
- Root or sudo access
- Domain name (devhub.sbs) pointing to server IP
- Port 80 and 443 open in firewall

## Quick Start

### 1. Initial Server Setup

```bash
# Run the setup script on your Ubuntu server
sudo bash deploy/setup-server.sh
```

### 2. Deploy the Website

```bash
# Deploy or update the website
sudo bash deploy/deploy.sh
```

### 3. Setup SSL Certificate

```bash
# Get free SSL certificate from Let's Encrypt
sudo certbot --nginx -d devhub.sbs -d www.devhub.sbs
```

## Detailed Setup Instructions

### Step 1: Prepare Your Ubuntu Server

1. **Update system packages**:
```bash
sudo apt update && sudo apt upgrade -y
```

2. **Install required packages**:
```bash
sudo apt install -y nginx git certbot python3-certbot-nginx ufw
```

3. **Configure firewall**:
```bash
sudo ufw allow 'Nginx Full'
sudo ufw allow OpenSSH
sudo ufw enable
```

### Step 2: Setup Git Repository Access

1. **Generate SSH key on server** (if deploying from private repo):
```bash
ssh-keygen -t ed25519 -C "server@devhub.sbs"
cat ~/.ssh/id_ed25519.pub
# Add this public key to your GitHub repository deploy keys
```

2. **Clone repository**:
```bash
sudo mkdir -p /var/www
sudo git clone https://github.com/genesis-nexus/devhub.sbs.git /var/www/devhub.sbs
```

### Step 3: Configure Nginx

1. **Copy Nginx configuration**:
```bash
sudo cp /var/www/devhub.sbs/deploy/nginx.conf /etc/nginx/sites-available/devhub.sbs
sudo ln -s /etc/nginx/sites-available/devhub.sbs /etc/nginx/sites-enabled/
```

2. **Test configuration**:
```bash
sudo nginx -t
```

3. **Reload Nginx**:
```bash
sudo systemctl reload nginx
```

### Step 4: Setup SSL Certificate

```bash
# Install SSL certificate (automated)
sudo certbot --nginx -d devhub.sbs -d www.devhub.sbs --non-interactive --agree-tos --email admin@devhub.sbs
```

### Step 5: Setup Automated Deployment (Optional)

1. **Setup Git webhook** (for auto-deployment on push):
```bash
sudo bash deploy/setup-webhook.sh
```

2. **Configure GitHub webhook**:
   - Go to GitHub repository settings
   - Add webhook URL: `http://your-server-ip:9000/hooks/deploy`
   - Secret: Use the one generated by setup script

## Directory Structure

```
/var/www/devhub.sbs/
├── docs/                 # Website files (served by Nginx)
│   ├── index.html
│   ├── styles.css
│   ├── script.js
│   ├── blog/
│   └── ...
├── deploy/              # Deployment scripts
│   ├── nginx.conf
│   ├── deploy.sh
│   ├── setup-server.sh
│   └── update.sh
└── logs/               # Application logs (if needed)
```

## Nginx Configuration Highlights

- **Root Directory**: `/var/www/devhub.sbs/docs`
- **Index File**: `index.html`
- **Gzip Compression**: Enabled for better performance
- **Caching**: Static assets cached for 1 year
- **Security Headers**: Added for better security
- **HTTP/2**: Enabled for better performance
- **SSL/TLS**: A+ rating configuration

## Updating the Website

### Manual Update

```bash
cd /var/www/devhub.sbs
sudo git pull origin main
sudo systemctl reload nginx
```

### Automated Update (Using provided script)

```bash
sudo bash /var/www/devhub.sbs/deploy/update.sh
```

## Monitoring and Maintenance

### Check Nginx Status

```bash
sudo systemctl status nginx
```

### Check Nginx Error Logs

```bash
sudo tail -f /var/log/nginx/error.log
```

### Check Access Logs

```bash
sudo tail -f /var/log/nginx/access.log
```

### Renew SSL Certificate (Automatic)

Certbot automatically renews certificates. Test renewal:
```bash
sudo certbot renew --dry-run
```

## Performance Optimization

### 1. Enable Nginx Caching

Already configured in nginx.conf with:
- Static asset caching
- Gzip compression
- Browser caching headers

### 2. CDN Integration (Optional)

Consider using Cloudflare for:
- Additional DDoS protection
- Global CDN distribution
- Free SSL/TLS

### 3. Enable HTTP/2

Already configured in nginx.conf for better performance.

## Security Best Practices

1. **Keep system updated**:
```bash
sudo apt update && sudo apt upgrade -y
```

2. **Setup fail2ban** (optional but recommended):
```bash
sudo apt install fail2ban
sudo systemctl enable fail2ban
```

3. **Regular backups**:
```bash
# Backup website
sudo tar -czf ~/devhub-backup-$(date +%Y%m%d).tar.gz /var/www/devhub.sbs/docs

# Backup Nginx config
sudo tar -czf ~/nginx-config-backup-$(date +%Y%m%d).tar.gz /etc/nginx
```

4. **Monitor logs regularly**:
```bash
sudo tail -f /var/log/nginx/access.log
sudo tail -f /var/log/nginx/error.log
```

## Troubleshooting

### Website not loading

1. Check Nginx is running:
```bash
sudo systemctl status nginx
```

2. Check Nginx configuration:
```bash
sudo nginx -t
```

3. Check firewall:
```bash
sudo ufw status
```

### SSL Certificate Issues

1. Renew manually:
```bash
sudo certbot renew
```

2. Check certificate status:
```bash
sudo certbot certificates
```

### Permission Issues

```bash
sudo chown -R www-data:www-data /var/www/devhub.sbs
sudo chmod -R 755 /var/www/devhub.sbs
```

## Rollback Procedure

If something goes wrong:

```bash
cd /var/www/devhub.sbs
sudo git log --oneline  # Find previous commit hash
sudo git reset --hard <commit-hash>
sudo systemctl reload nginx
```

## Cost Considerations

- **Ubuntu Server**: $5-10/month (DigitalOcean, Linode, Vultr)
- **Domain**: $10-15/year
- **SSL Certificate**: Free (Let's Encrypt)
- **Total Monthly Cost**: ~$5-10

## Alternative Deployment Options

If you prefer simpler alternatives:

1. **GitHub Pages**: Free, but limited functionality
2. **Vercel/Netlify**: Free tier, very easy deployment
3. **Cloudflare Pages**: Free, with CDN included
4. **AWS S3 + CloudFront**: Pay-as-you-go, highly scalable

## Support

For issues or questions:
- Check Nginx documentation: https://nginx.org/en/docs/
- Let's Encrypt documentation: https://letsencrypt.org/docs/
- Ubuntu documentation: https://ubuntu.com/server/docs

## Next Steps

After deployment:
1. Setup monitoring (optional: UptimeRobot, Pingdom)
2. Configure backups (automated daily/weekly)
3. Setup CI/CD pipeline (GitHub Actions)
4. Add analytics (already has Google Analytics)
5. Performance testing (GTmetrix, PageSpeed Insights)
